<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.433">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Digitale innovatie - Klantbeeld optimalisatie</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Digitale innovatie</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link active" href="./index.html" rel="" target="" aria-current="page">
 <span class="menu-text">Inleiding</span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools ms-auto">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#inleiding" id="toc-inleiding" class="nav-link active" data-scroll-target="#inleiding">Inleiding</a></li>
  <li><a href="#trends" id="toc-trends" class="nav-link" data-scroll-target="#trends">Trends</a>
  <ul class="collapse">
  <li><a href="#horizons" id="toc-horizons" class="nav-link" data-scroll-target="#horizons">Horizons</a></li>
  <li><a href="#technologieen" id="toc-technologieen" class="nav-link" data-scroll-target="#technologieen">Technologieen</a></li>
  <li><a href="#sectoren" id="toc-sectoren" class="nav-link" data-scroll-target="#sectoren">Sectoren</a></li>
  <li><a href="#trends-in-air-travel" id="toc-trends-in-air-travel" class="nav-link" data-scroll-target="#trends-in-air-travel">Trends in Air Travel</a></li>
  </ul></li>
  <li><a href="#literatuur-review" id="toc-literatuur-review" class="nav-link" data-scroll-target="#literatuur-review">Literatuur review</a>
  <ul class="collapse">
  <li><a href="#methodes-en-toepassingen-machine-learning-en-ai" id="toc-methodes-en-toepassingen-machine-learning-en-ai" class="nav-link" data-scroll-target="#methodes-en-toepassingen-machine-learning-en-ai">Methodes en Toepassingen Machine Learning en AI</a></li>
  <li><a href="#responsible-ai" id="toc-responsible-ai" class="nav-link" data-scroll-target="#responsible-ai">Responsible AI</a></li>
  <li><a href="#zoektermen" id="toc-zoektermen" class="nav-link" data-scroll-target="#zoektermen">Zoektermen</a></li>
  <li><a href="#bronnen" id="toc-bronnen" class="nav-link" data-scroll-target="#bronnen">Bronnen</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Klantbeeld optimalisatie</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="inleiding" class="level2">
<h2 class="anchored" data-anchor-id="inleiding">Inleiding</h2>
<p>Wat is het hoofdthema?</p>
<p>Waarom is het belangrijk?</p>
<ul>
<li>Illustraties success / fail</li>
</ul>
<p>Voor wie is het belangrijk?</p>
<ul>
<li>Doelgroep</li>
</ul>
<p>Wat is de propositie?</p>
<ul>
<li>Wat kun je met de aangeleverde kennis en / of tooling?</li>
</ul>
</section>
<section id="trends" class="level2">
<h2 class="anchored" data-anchor-id="trends">Trends</h2>
<section id="horizons" class="level3">
<h3 class="anchored" data-anchor-id="horizons">Horizons</h3>
<p><a href="https://hbr.org/2019/07/how-to-do-strategic-planning-like-a-futurist"><img src="https://hbr.org/resources/images/article_assets/2019/07/W190711_WEBB_AFUTURISTS.png" class="img-fluid"></a> Bron: <span class="citation" data-cites="webb_how_2019">Webb (<a href="#ref-webb_how_2019" role="doc-biblioref">2019</a>)</span></p>
<p>Wat komt er op korte / lange termijn op organisaties af?</p>
</section>
<section id="technologieen" class="level3">
<h3 class="anchored" data-anchor-id="technologieen">Technologieen</h3>
<p><a href="https://www.gartner.com/en/articles/what-s-new-in-the-2023-gartner-hype-cycle-for-emerging-technologies"><img src="hypecycle.png" class="img-fluid" target="_blank"></a> Bron: <span class="citation" data-cites="noauthor_4_nodate"><span>“4 <span>Exciting</span> <span>New</span> <span>Trends</span> in the <span>Gartner</span> <span>Emerging</span> <span>Technologies</span> <span>Hype</span> <span>Cycle</span>”</span> (<a href="#ref-noauthor_4_nodate" role="doc-biblioref">n.d.</a>)</span></p>

<iframe width="560" height="315" src="https://www.youtube.com/embed/vMUpzxZB3-Y?si=fsEegzBCfUMTBq-2" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen=""></iframe>
<p>Bron: <span class="citation" data-cites="sxsw_amy_2023">SXSW (<a href="#ref-sxsw_amy_2023" role="doc-biblioref">2023</a>)</span></p>
</section>
<section id="sectoren" class="level3">
<h3 class="anchored" data-anchor-id="sectoren">Sectoren</h3>
<p><a href="https://futuretodayinstitute.com/trends/"><img src="futurereport.png" class="img-fluid"></a> Bron: <span class="citation" data-cites="noauthor_what_2023"><span>“What <span>We</span> <span>See</span> - <span>Future</span> <span>Today</span> <span>Institute</span>”</span> (<a href="#ref-noauthor_what_2023" role="doc-biblioref">2023</a>)</span></p>
</section>
<section id="trends-in-air-travel" class="level3">
<h3 class="anchored" data-anchor-id="trends-in-air-travel">Trends in Air Travel</h3>
<p>“Enhanced customer experience: Omnichannel expansion continues. Immersive realities could allow brands to create more engaging and interactive experiences for their customers: vir- tual tours and events, utilizing AR rendering or a digital twin to try on clothing or furniture from the comfort of one’s home, or traveling anywhere at the drop of a hat with very little carbon footprint (or, for IRL trips, experiencing a digital overlay of recommendations, historical models and simula- tions, or just-in-time booking opportunities).” <span class="citation" data-cites="noauthor_what_2023">(<a href="#ref-noauthor_what_2023" role="doc-biblioref"><span>“What <span>We</span> <span>See</span> - <span>Future</span> <span>Today</span> <span>Institute</span>”</span> 2023</a>)</span></p>
<p>“New screen and spatial tracking technology could make it possible to show personalized information and wayfinding details in context. Partnering with Misapplied Sciences, Delta has piloted a “parallel reality” departure board at Detroit Metropolitan Airport. Travelers scan a digital boarding pass as overhead sensors track their presence and position and relay personal- ized flight details on a multi-view pixel display; the display can simultaneously project different colors of light in different directions depending on where the viewer is standing. The display technology, combined with beacon tracking, could create the “Minority Report” vision for contextual advertising and wayfinding in stadiums, shopping centers, and more.” <span class="citation" data-cites="noauthor_what_2023">(<a href="#ref-noauthor_what_2023" role="doc-biblioref"><span>“What <span>We</span> <span>See</span> - <span>Future</span> <span>Today</span> <span>Institute</span>”</span> 2023</a>)</span></p>
</section>
</section>
<section id="literatuur-review" class="level2">
<h2 class="anchored" data-anchor-id="literatuur-review">Literatuur review</h2>
<section id="methodes-en-toepassingen-machine-learning-en-ai" class="level3">
<h3 class="anchored" data-anchor-id="methodes-en-toepassingen-machine-learning-en-ai">Methodes en Toepassingen Machine Learning en AI</h3>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="machinelearning-tourism.jpeg" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Bron: <span class="citation" data-cites="jain_systematic_2021">Jain, Pamula, and Srivastava (<a href="#ref-jain_systematic_2021" role="doc-biblioref">2021</a>)</span></figcaption>
</figure>
</div>
<p>“Thus, this is a research gap in automatically scrapping information from user-generated online reviews to accurately predicting drivers for consumer recommendations, understanding the advice to different services, and finally forming them into NPS.” <span class="citation" data-cites="jain_systematic_2021">(<a href="#ref-jain_systematic_2021" role="doc-biblioref">Jain, Pamula, and Srivastava 2021</a>)</span></p>
<table class="table">
<colgroup>
<col style="width: 33%">
<col style="width: 33%">
<col style="width: 33%">
</colgroup>
<tbody>
<tr class="odd">
<td><img src="recommender1.jpg" class="img-fluid"></td>
<td><img src="recommender2.jpg" class="img-fluid"></td>
<td><img src="recommender3.jpg" class="img-fluid"></td>
</tr>
<tr class="even">
<td><img src="recommender4.jpg" class="img-fluid"></td>
<td><img src="recommender5.jpg" class="img-fluid"></td>
<td></td>
</tr>
</tbody>
</table>
<p>Bron: <span class="citation" data-cites="renjith_extensive_2020">Renjith, Sreekumar, and Jathavedan (<a href="#ref-renjith_extensive_2020" role="doc-biblioref">2020</a>)</span></p>
</section>
<section id="responsible-ai" class="level3">
<h3 class="anchored" data-anchor-id="responsible-ai">Responsible AI</h3>
<p>From <span class="citation" data-cites="shin_why_2021">Shin, Rasul, and Fotiadis (<a href="#ref-shin_why_2021" role="doc-biblioref">2021</a>)</span></p>
<p><strong>Table A1. Measurements</strong></p>
<table class="table">
<colgroup>
<col style="width: 22%">
<col style="width: 77%">
</colgroup>
<thead>
<tr class="header">
<th>Variables</th>
<th>Measures</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Transparency</td>
<td>(1) The evaluation and the criteria of algorithms used should be publicly released and understandable to people (Understandability)</td>
</tr>
<tr class="even">
<td></td>
<td>(2) Any outputs produced by an algorithmic system should be explainable to the people affected by those outputs (Explainability)</td>
</tr>
<tr class="odd">
<td></td>
<td>(3) Algorithms should let people know how well internal states of algorithms can be understood from knowledge of their external outputs (Observability)</td>
</tr>
<tr class="even">
<td>Fairness</td>
<td>(1) The AI system has no favoritism and does not discriminate against people (Nondiscrimination)</td>
</tr>
<tr class="odd">
<td></td>
<td>(2) The source of data throughout an algorithm and its data sources should be accurate and correct (Accuracy)</td>
</tr>
<tr class="even">
<td></td>
<td>(3) I believe the AI system follows the due process of impartiality with no prejudice (Due process)</td>
</tr>
<tr class="odd">
<td>Accountability</td>
<td>(1) An AI system requires a person in charge who should be accountable for its adverse individual or societal effects in a timely fashion (Responsibility)</td>
</tr>
<tr class="even">
<td></td>
<td>(2) Algorithms should be designed to enable third parties to examine and review the behavior of an algorithm (Auditability)</td>
</tr>
<tr class="odd">
<td></td>
<td>(3) Algorithms should have the ability to modify a system in its entire configuration using only certain manipulations (Controllability)</td>
</tr>
<tr class="even">
<td>Explainability</td>
<td>(1) I found AI algorithms are easily comprehensible</td>
</tr>
<tr class="odd">
<td></td>
<td>(2) I think the AI services are interpretable and understandable</td>
</tr>
<tr class="even">
<td></td>
<td>(3) I can figure out the internal mechanics of machine learning</td>
</tr>
<tr class="odd">
<td>Trust</td>
<td>(1) I trust the recommendations by algorithm-driven services</td>
</tr>
<tr class="even">
<td></td>
<td>(2) Recommended items through algorithmic processes are credible</td>
</tr>
<tr class="odd">
<td></td>
<td>(3) The algorithm service results are trustworthy</td>
</tr>
<tr class="even">
<td>Personalization</td>
<td>(1) I think that the recommended items reflect my personalized preferences</td>
</tr>
<tr class="odd">
<td></td>
<td>(2) I found the recommended items are a great match for my needs</td>
</tr>
<tr class="even">
<td></td>
<td>(3) It seems that the algorithm-based service is customized to me</td>
</tr>
<tr class="odd">
<td>Accuracy</td>
<td>(1) The contents produced by algorithms are accurate</td>
</tr>
<tr class="even">
<td></td>
<td>(2) Recommended items by algorithm systems are in general precise</td>
</tr>
<tr class="odd">
<td></td>
<td>(3) Algorithm-enabled recommendations are exact and correct</td>
</tr>
<tr class="even">
<td>Attitude</td>
<td>(1) I am fairly pleased with algorithm services</td>
</tr>
<tr class="odd">
<td></td>
<td>(2) Overall, the algorithm services fulfill my initial expectations</td>
</tr>
<tr class="even">
<td></td>
<td>(3) Generally, I am satisfied with the contents of algorithm services</td>
</tr>
<tr class="odd">
<td>Intention</td>
<td>(1) I would like to intend to use algorithm services</td>
</tr>
<tr class="even">
<td></td>
<td>(2) I will continue to use algorithm services</td>
</tr>
<tr class="odd">
<td></td>
<td>(3) I intend to use and will further adopt algorithm services</td>
</tr>
</tbody>
</table>
</section>
<section id="zoektermen" class="level3">
<h3 class="anchored" data-anchor-id="zoektermen">Zoektermen</h3>
<p>Google Scholar:</p>
<ul>
<li><p>“customer experience air travel”</p></li>
<li><p>“customer experience air travel recommender”</p></li>
<li><p>“air travel recommender systems”</p></li>
</ul>
</section>
<section id="bronnen" class="level3">
<h3 class="anchored" data-anchor-id="bronnen">Bronnen</h3>
<div id="refs" class="references csl-bib-body hanging-indent" role="list">
<div id="ref-noauthor_4_nodate" class="csl-entry" role="listitem">
<span>“4 <span>Exciting</span> <span>New</span> <span>Trends</span> in the <span>Gartner</span> <span>Emerging</span> <span>Technologies</span> <span>Hype</span> <span>Cycle</span>.”</span> n.d. <em>Gartner</em>. Accessed December 22, 2023. <a href="https://www.gartner.com/en/articles/what-s-new-in-the-2023-gartner-hype-cycle-for-emerging-technologies">https://www.gartner.com/en/articles/what-s-new-in-the-2023-gartner-hype-cycle-for-emerging-technologies</a>.
</div>
<div id="ref-jain_systematic_2021" class="csl-entry" role="listitem">
Jain, Praphula Kumar, Rajendra Pamula, and Gautam Srivastava. 2021. <span>“A Systematic Literature Review on Machine Learning Applications for Consumer Sentiment Analysis Using Online Reviews.”</span> <em>Computer Science Review</em> 41 (August): 100413. <a href="https://doi.org/10.1016/j.cosrev.2021.100413">https://doi.org/10.1016/j.cosrev.2021.100413</a>.
</div>
<div id="ref-renjith_extensive_2020" class="csl-entry" role="listitem">
Renjith, Shini, A. Sreekumar, and M. Jathavedan. 2020. <span>“An Extensive Study on the Evolution of Context-Aware Personalized Travel Recommender Systems.”</span> <em>Information Processing &amp; Management</em> 57 (1): 102078. <a href="https://doi.org/10.1016/j.ipm.2019.102078">https://doi.org/10.1016/j.ipm.2019.102078</a>.
</div>
<div id="ref-shin_why_2021" class="csl-entry" role="listitem">
Shin, Donghee, Azmat Rasul, and Anestis Fotiadis. 2021. <span>“Why Am <span>I</span> Seeing This? <span>Deconstructing</span> Algorithm Literacy Through the Lens of Users.”</span> <em>Internet Research</em> 32 (4): 1214–34. <a href="https://doi.org/10.1108/INTR-02-2021-0087">https://doi.org/10.1108/INTR-02-2021-0087</a>.
</div>
<div id="ref-sxsw_amy_2023" class="csl-entry" role="listitem">
SXSW. 2023. <span>“Amy <span>Webb</span> <span>Launches</span> 2023 <span>Emerging</span> <span>Tech</span> <span>Trend</span> <span>Report</span> <span></span> <span>SXSW</span> 2023.”</span> <a href="https://www.youtube.com/watch?v=vMUpzxZB3-Y">https://www.youtube.com/watch?v=vMUpzxZB3-Y</a>.
</div>
<div id="ref-webb_how_2019" class="csl-entry" role="listitem">
Webb, Amy. 2019. <span>“How to <span>Do</span> <span>Strategic</span> <span>Planning</span> <span>Like</span> a <span>Futurist</span>.”</span> <em>Harvard Business Review</em>, July. <a href="https://hbr.org/2019/07/how-to-do-strategic-planning-like-a-futurist">https://hbr.org/2019/07/how-to-do-strategic-planning-like-a-futurist</a>.
</div>
<div id="ref-noauthor_what_2023" class="csl-entry" role="listitem">
<span>“What <span>We</span> <span>See</span> - <span>Future</span> <span>Today</span> <span>Institute</span>.”</span> 2023. <a href="https://futuretodayinstitute.com/trends/">https://futuretodayinstitute.com/trends/</a>.
</div>
</div>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>